#!/bin/bash
# 開発環境停止スクリプト

echo "======================================================"
echo "NPO予算管理システム - 開発環境停止スクリプト"
echo "======================================================"

# 開発環境のプロセスを停止
echo "開発環境のプロセスを停止中..."

# バックエンドを停止
if pgrep -f "python main_dev.py" > /dev/null; then
    echo "バックエンドプロセスを停止中..."
    pkill -f "python main_dev.py"
    echo "✓ バックエンドを停止しました"
else
    echo "バックエンドプロセスが見つかりません"
fi

# フロントエンドを停止（ポート3001）
if pgrep -f "next dev.*3001" > /dev/null; then
    echo "フロントエンドプロセス（ポート3001）を停止中..."
    pkill -f "next dev.*3001"
    echo "✓ フロントエンドを停止しました"
else
    echo "フロントエンドプロセス（ポート3001）が見つかりません"
fi

# ポート確認
echo ""
echo "ポート使用状況:"
ss -tlnp | grep -E "(8001|3001)" || echo "開発環境のポートは使用されていません"

echo ""
echo "======================================================"
echo "開発環境を停止しました"
echo "======================================================"